# 빅데이터분석기사 2021

## 3 빅데이터 모델링

### CHAPTER1 분석 모형 설계

#### 1 분석 절차 수립

##### 1) 분석 모형 선정
통계, 데이터 마이닝, 머신러닝 기반 분석 모델 기법을 고려하여 적합한 빅데이터 분석 모델을 선정

 - 탐색적 데이터 분석(EDA) : 현상에서 패턴을 발견하는 것

 - 통계적 추론 : 현상에서 인과적인 결론을 도출하는 것

 - 기계학습(머신러닝) : 현상을 예측하는 것



###### (1) 통계기반 분석 모형

1. 기술 통계 (Descriptive Statistics)
   - 데이터 분석의 목적으로 수집된 데이터를 확률, 통계적으로 정리.요약하는 기초적인 통계
   - 평균, 분산, 표준편차, 왜도와 첨도, 빈도 등 데이터에 대한 대략적인 통계적 수치를 계산하고 도출
   - 그래프 활용하여 데이터 파악
   - 분석 초기 단계에서 데이터 분포의 특징 파악

2. 상관 분석 (Correlation Analysis)
   - 두 개 이상의 변수 간에 존재하는 상호 연관성의 정도를 측정하여 분석하는 방법
   - 변수 개수 및 데이터 속성에 따라 세부 모델로 분류
     - 단순상관 분석 : 두 변수 사이의 연관 관계 분석
     - 다중상관 분석 : 셋 또는 그 잉상의 변수들 사이의 연관 정도를 분석
     - 변수 간의 상관 분석 : 데이터의 속성에 따라서 수치적, 명목적, 순서적 데이터 등을 가지는 변수 간의 분석

3. 회귀 분석(Regression Analysis)
   - 하나 이상의 독립변수들이 종속변수에 미치는 영향을 추정할 수 있는 통계 기법
   - 독립변수와 종속변수의 개수 및 특성에 따라 단순 회귀, 다중 회귀, 다항 회귀, 곡선 회귀, 로지스틱 회귀, 비선형 회귀로 분류
     - 단순 회귀 : 독립변수가 1개이며, 종속변수와의 관계가 직선
     - 다중 회귀 : 독립변수가 K개이며, 종속변수와의 관계가 선형(1차 함수)
     - 다항 회귀 : 독립변수와 종속변수와의 관계가 1차 함수 이상인 관계(단, 독립변수가 1개일 경우에는 2차 함수 이상)
     - 곡선 회귀 : 독립변수가 1개이며 종속변수와의 관계가 곡선
     - 로지스틱 회귀 : 종속변수가 범주형(2진 변수)인 경우 적용. 단순 로지스틱 회귀 및 다중 로지스틱 회귀로 확장 가능
     - 비선형 회귀 : 회귀식의 모양이 선형관계로 이뤄져 있지 않은 모형

4. 분산 분석 (Analysis of Variance; **ANOVA**)
   - 두 개 이상의 집단 간 비교를 수행하고자 할 때 집단 내의 분산(총 평균고 각 집단의 평균 차이에 의해 생긴 분산)의 비교로 얻은 분포를 이용하여 가설검정을 수행하는 방법
   - 복수의 집단을 비교할 때 분산을 계산함으로써 집단 간에 통계적인 차이를 판정하는 분석 방법
   - 독립변수와 종속변수의 수에 따라 일원분산 분석, 이원분산 분석, 다변량 분산 분석으로 분류

5. 주성분 분석 (Principal Component Analysis; **PCA**)
   - 많은 변수의 분산 방식(분산, 공분산)의 패턴을 간결하게 표현하는 주성분 변수를 원래 변수의 선형 결합으로 추출하는 통계기법
   - PCA는 일부 주성분에 의해 변수의 변동이 충분히 설명되는지 알아보는 분석 방법

6. 판별 분석 (Discriminant Analysis)
   - 집단에 대한 정보로부터 집단을 구별할 수 있는 판별규칙 혹은 판별함수를 만들고, 다변량 기법으로 조사된 집단에 대한 정보를 활용하여 새로운 개체가 어떤 집단인지를 탐색하는 통계기법

###### (2) 데이터 마이닝 기반 분석 모형 선정

데이터 마이닝(Data Mining) 개념

- 데이터 마이닝은 대용량 데이터로부터 데이터 내에 존재하는 패턴, 관계 혹은 규칙 등을 탐색하고 통계적인 기법들을 활용하여 모델화하며 이를 통해 데이터 분석 및 더 나아가 유용한 정보, 지식 등을 추출하는 과정이다.
- 데이터 마이닝 기능 중 하나인 기술(Description)은 사람, 상품에 관한 이해를 증가시키기 위해 데이터가 가지고 있는 특징을 나타내고 설명에 대한 답을 제공할 수 있다.

데이터 마이닝 기반 분석 모델 분류

1. 분류 모델(Classification Model)

- 분류(Classification)은 범주형 변수 혹은 이산형 변수 등의 범주를 예측하는 것으로, 다수의 속성 혹은 변수를 가지는 객체들을 사전에 정해진 그룹이나 범주중의 하나로 분류하는 모델이다.
- 분류 모델로는 통계적 기법, 트리 기반 기법, 최적화 기법, 기계학습 모델이 있다.

- 분류 모델 유형
  - 통계적 기법
    - 로지스틱 회귀 분석, 판별 분석 등과 같은 다변량 통계이론에 근거한 기법
    - 로지스틱 회귀 분석은 선형 회귀 분석과 달리 종속변수가 서열형, 범주형 혹은 명목형 데이터일 때 사용되는 기법으로, 분석 대상이 두 개 혹은 그 이상의 집단으로 구분되는 경우에 개별 관측치들이 어느 집단에 분류될 수 있는지를 분석하고 이를 예측하는 모델을 개발하는 데 사용되는 통계기법
  - 트리 기반 기법
    - 의사결정 규칙에 따라 관심 대상이 되는 집단을 몇개의 소집단으로 분류하면서 분석하는 기법
    - CART 알고리즘 활용
  - 최적화 기법
    - 가장 적합한 값을 찾는 기법으로 서포트 벡터 머신 등이 있음
    - 서포트 벡터 머신은 데이터를 분리하는 초평면(Hyperplane) 중에서 데이터들과 거리가 가장 먼 초평면을 선택하여 분리하는 확정적 모델 기반의 이진 선형 분류 방법(초평면에 가장 가까운 곳에 위치한 데이터는 서포터 벡터)
  - 기계 학습(Machine Learning)
    - 인공지능의 분야 중 하나로, 인간의 학습 능력과 같은 기능을 컴퓨터에서 실현하고자 하는 기술
    - 환경과의 상호작용에 기반한 경험적인 데이터로부터 스스로 성능을 향상시키는 시스템을 연구하는 기술

2. 예측 모델(Prediction Model)
   - 예측 모델은 범주형 및 수치형 등의 과거 데이터로부터 특성을 분석하여 다른 데이터의 결과값을 예측하는 기법
   - 예측 모델 기법
     - 회귀 분석(Regression)
       - 관촬된 연속형 변수들에 대해 두 변수 사이의 모형을 구한 뒤 적합도를 측정해 내는 분석 방법
     - 의사결정나무(Decistion Tree)
       - 의사결정 규칙(Rule)을 트리구조로 도표화하여 분류(Classification)와 예측(Prediction)을 수행하는 분석 방법
       - 판별 분석, 회귀 분석 등과 같은 변수(Parameer) 모형을 분석하기 위해 사전에 이상값(Outlier)을 검색할 때도 사용 가능
       - 의사결정나무 자체를 분류 또는 예측 모형으로 사용
     - 시계열 분석(Time Series Analysis)
       - 연도별, 분기별, 월별 등 시계열로 관측되는 자료를 분석하여 미래를 예측하기 위한 분석기법
     - 인공신경망(Artificial Neural Network; ANN)
       - 사람 두뇌의 신경세포인 뉴런이 전기신호를 전달하는 모습을 모방한 예측 모델
3. 군집화 모델(Clustering Model)
   - 군집화는 이질적인 집단을 몇 개의 동질적인 소집단으로 세분화 하는 작업
   - 군집방법
     - 계층적 방법
       - 사전에 군집 수를 정하지 않고 단계적으로 단계별 군집결과를 산출하는 방법
       - 응집 분석법 : 각 객체를 하나의 소집단으로 간주하고 단계적으로 유사한 소집단들을 합쳐 새로운 소집단을 구성하는 방법
       - 분할 분석법 : 전체 집단으로 부터 시작하여 유사성이 떨어지는 객체들을 분리하는 방법
     - 비 계층적 방법
       - 군집을 위한 소집단의 개수를 정해놓고 각 객체 중 하나의 소집단으로 배정하는 방법
       - 비 계층적 방법의 기법으로 K 평균 군집화가 있음
       - K 평균 군집화는 K개 소집단의 중심좌표를 이용하여 각 객체와 중심좌표 간의 거리를 산출하고, 가장 근접한 소집단에 배정한 후 해당 소집단의 중심좌표를 업데이트하는 방식으로 군집화 하는 방식
4. 연관규칙 모델(Association Rule Model)
   - 연관규칙이란 데이터 숨어 있으면서 동시에 발생하는 사건 혹은 항목 간의 규칙을 수치화하는 것이다.
   - 연관 분석은 장바구니 분석이라고도 불리며 주로 마케팅에서 활용된다.

###### (3) 머신러닝 기반 분석 모형 선정

1. 지도 학습

   정답인 레이블(Label)이 포함되어 있는 학습 데이터를 통해 컴퓨터를 학습

   지도 학습 기법의 유형

   - 로지스틱 회귀(Logistic Regression) : 반응변수가 범주형인 경우 적용
   - 인공신경망 분석(Artificial Neural Network;ANN) : 인간의 뉴런 구조를 모방
   - 의사결정나무(Decision Tree) : 데이터들이 가진 속성들로부터 분할 기준 속성을 판별, 트리형태로 모델링하는 분류 및 예측 모델
   - 서포트 벡터 머신(SVM) : 데이터를 분리하는 초평면(Hyperplane) 중에서 데이터들과 거리가 가장 먼 초평면을 선택하여 분리하는 지도학습 기반의 이진 선형 분류 모델
   - 랜덤 포레스트(Random Forest) : 의사결정나무의 특징인 분산이 크다는 점을 고려하여 배깅과 부스팅보다 더 많은 무작위성을 주어 약한 학습기법들을 생성한 후 이를 선형 결합하여 최종 학습기를 만드는 방법
   - 감성분석(Sentiment Analysis) : 주관적인 인상, 감정 태도, 개인의 의견들을 텍스트로 부터 뽑아내는 분석

2. 비지도 학습

   정답인 레이블(Label)이 없는 상태에서 데이터가 어떻게 구성되었는지를 알아내는 기계 학습

   목적변수(혹은 반응변수, 종속변수, 목표변수, 출력값)에 대한 정보 없이 학습이 이루어 지는 방법

   현상의 설명(Description)이나 특징 도출, 패턴 도출등의 문제에 활용

   비지도 학습에 대표적인 기법은 군집화(Clustering), 차원축소 기법, 연관 관계분석(장바구니 분석), 자율학습 인공신경망, 딥러닝

###### (4) 변수에 따른 분석기법 선정

변수분석

- 단일변수 분석
  - 변수 하나에 대해 기술 통계 확인을 하는 단계
  - 연속형 변수는 히스토그램이나 박스플롯을 사용해서 최빈값, 평균, 중위수 등과 함께 각 분포를 확인
- 이변수 분석
  - 변수 2개 간의 관계를 분석하는 단계
- 다변수 분석
  - 세 개 이상의 변수 간의 관계를 시각화, 분석하는 방법

독립변수와 종속변수의 데이터 유형에 따른 분석기법

독립 변수와 종속변수가 주어진 경우 분석 기법

|             |             | 종속변수(Y)                                        | 종속변수(Y)                                      |
| ----------- | ----------- | -------------------------------------------------- | ------------------------------------------------ |
|             |             | 연속형 변수                                        | 범주형 변수                                      |
| 독립변수(X) | 연속형 변수 | 회귀분석</br>인공신경망 모델</br>K-최근접 이웃기법 | 로지스틱 회귀 분석, 판별 분석, K-최근접 이웃기법 |
| 독립변수(X) | 범주형 변수 | 회귀분석, 인공신경망 모델, 의사결정나무            | 인공신경망모델, 의사결정나무, 로지스틱회귀분석   |



독립변수만 주어진 경우 분석 기법

| 독립변수(X)            | 독립변수(X)            |
| ---------------------- | ---------------------- |
| 연속형 변수            | 범주형 변수            |
| 주성분 분석, 군집 분석 | 연관성 규칙, 판별 분석 |



##### 2) 분석 모형 정의

###### (1) 분석 모형 정의 개념

파라미터와 하이퍼 파라미터 개념

- 파라미터(Parameter)
  - 모델 내부에서 확인이 가능한 변수로 데이터를 통해서 산출이 가능한 값
  - 파라미터가 모델의 성능을 결정
  - 파라미터는 측정되거나 데이터로부터 학습
  - 사람에 의해 수작업으로 측정되지 않음
  - 예) 인공신경망에서의 `가중치`, SVM에서의 `서포트 벡터`, 선형 회귀나 로지스틱 회귀 분석에서의 `결정계수`
- 하이퍼 파라미터(Hyper-Parameter)
  - 사용자가 직접 설정해주는 값
  - 모델의 파라미터값을 측정하기 위해 알고리즘 구현 과정에서 사용
  - 알고리즘 사용자에 의해 결정
  - 경험에 의해 결정 가능한 값
  - 예) 신경망 학습에서 `학습률(Learning Rate)`, 의사결정나무에서 `나무의 깊이`, KNN에서 `K의 개수`

###### (2) 분석 모형 정의 고려사항

- 분석 대상인 데이터에 비해 모델이 너무 간단하면 **과소적합** 이 발생, 모델을 너무 복잡하게 선택하면 **과대적합** 이 발생
- 편차(Deviation) : 평균과의 차이
- 오차(Error) : 정확치와 관측치의 차이
- 잔차(Residual) : 표본에서 나온 관측값이 회귀선과 비교해볼 때 나타나는 차이



##### 3) 분석 모형 구축 절차

분석모형 구축은 **요건정의 > 모델링 > 검증 및 테스트 > 적용** 단계로 진행

###### (1) 요건 정의

- 분석 **요건 도출, 수행방안 설계, 요건 확정** 단계로 수행
- 분석 과정을 설계하고, 구체적인 내용을 실무담당자와 협의

###### (2) 모델링

- 요건 정의에 따라 **상세분석기법을 적용해 모델을 개발하는 과정**
- 모델링 단계는 **모델링 마트 설계 및 구축, 탐색적 분석과 유의 변수 도출, 모델링, 모델링 성능 평가** 단계로 수행
- 모델링 마트 설계 및 구축
  - 다양한 원천 데이터로부터 분석 대상 데이터를 획득
  - 탐색, 정제, 요약 등의 전처리를 통해 변수들을 식별
  - 데이터를 구조화하여 모델 마트를 설계
  - 전처리한 분석 대상 데이터를 적재해 모델 마트를 구축
- 탐색적 분석과 유의 변수 도출
  - 유의미한 변수를 파악하기 위해 목푯값별로 해당 변수의 분포된 값을 보고 해당 변수의 구간에서 차이가 큰지를 파악
  - 타당성과 적합성을 판단
  - 최적화를 위해 분석 모형 및 데이터의 유의성을 반복적으로 보정
  - 단위 분석에 대한 예상 소요 시간을 추정
  - 도출 과정에서 정보가 부족하면 신속하게 추가 변수 개발
- 모델링
  - 업무 특성에 적합한 기법을 선택 또는 여러 모델링 기법을 결합해 적용
  - 입력값이 확률분포이면 시뮬레이션 기법을, 프로세스 및 자원에 대한 제약이 있고 상숫값을 가질 때는 최적화 기법을 사용
  - 경우에 따라 시뮬레이션과 최적화를 결합해 적용
- 모델링 성능 평가
  - 정확도(Accuracy), 정밀도(Precision), 재현율(Recall), 향상도(Lift) 등의 값으로 판단
  - 최적화 이전의 객체 함숫값(Object Function Value)과 최적화 이후의 값의 차이를 구하여 평가

###### (3) 검증 및 테스트

- 분석용 데이터를 학습용과 테스트 용으로 분리한 다음 분석용 데이터를 이용해 자체 검증
- 모든 모델링에서는 반드시 검증 및 테스트를 거친다.
- 테스트 데이터 비율은 일반적으로 분석용 데이터 세트의 20~40% 정도를 이용

###### (4) 적용

- 분석결과를 업무 프로세스에 완전히 통합해 실제 일, 주, 월 단위로 운영하는 단계
- 적용 단계 상세 절차
  - 운영 시스템에 적용과 자동화 : 자동으로 모니터링하고 이상 시에만 확인하는 프로세스 수립
  - 주기적 리모델링 : 필요에 따라 분석 모형을 재조정. 학습을 다시 하거나 변수를 추가하는 방법 적용



#### 2 분석 환경 구축

##### 1) 분석 도구 선정

- 분석 도구는 대표적으로 R과 파이썬

###### (1) R

- 특징
  - 강력한 시각화 기능 제공
  - 핵심 패키지는 R 설치와 함께 설치
  - 통합 개발환경(IDE) R Studio 제공
  - MS Windows, Mac OS, Linux 등 다양한 OS 지원
  - 속도 느리다는 평가도 있으나, 상용버전인 S-Plus 보다 많은 경우에 있어 속도가 빠름

###### (2) 파이썬(Python)

- 특징
  - C언어 기반의 오픈소스 프로그래밍 언어
  - 초보자도 쉽게 배울수 있음
  - 좋은 시각화 라이브러리가 있지만, R과 비교하면 선택폭이 좁음
  - MS Windows, Mac OS, Linux 등 다양한 OS 지원



##### 2) 데이터 분할

###### (1) 데이터 분할 개념

- 데이터를 **학습용 데이터, 검증용 데이터, 평가용 데이터** 로 분할하는 것을 말함
- 이유는 주어진 데이터에 대해서만 높은 성능을 보이는 과대 적합의 문제를 예방

###### (2) 데이터 분할 시 고려사항

- 학습용 데이터와 검증용 데이터는 학습 과정에서 사용하며, 평가용 데이터는 오로지 평가를 위한 과정에서만 사용
- 검증용 데이터를 사용하여 모형이 제대로 학습되었는지 중간에 검증을 실시, 과대 적합과 과소 적합의 발생 여부 등을 확인하여 모형의 튜닝에도 사용
- 한 번도 사용하지 않은 평가용 데이터를 통하여 모델을 평가
- 데이터가 충분하지 않을 시 학습용 데이터와 평가용 데이터로만 분할



### P.51 인공신경망 부터 봐라
### P.56 부터 
### p.83 from
### 3 finish
